{"version":3,"sources":["../../src/middlewares/checkAuth.js"],"names":["secret","process","env","JWT_KEY","checkAuth","req","res","next","token","headers","authorization","split","body","decoded","jwt","verify","userData","error","status","json","message"],"mappings":";;;;;;;;;AAEA;;AAFA;;AACA;AAGA,IAAMA,MAAM,GAAGC,OAAO,CAACC,GAAR,CAAYC,OAA3B;;AACA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACpC,MAAI;AACF,QAAMC,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAYC,aAAZ,CAA0BC,KAA1B,CAAgC,GAAhC,EAAqC,CAArC,KAA2CN,GAAG,CAACO,IAAJ,CAASJ,KAAlE;;AACA,QAAMK,OAAO,GAAGC,yBAAIC,MAAJ,CAAWP,KAAX,EAAkBR,MAAlB,CAAhB;;AACAK,IAAAA,GAAG,CAACW,QAAJ,GAAeH,OAAf;AACAN,IAAAA,IAAI;AACL,GALD,CAKE,OAAOU,KAAP,EAAc;AACd,WAAOX,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BC,MAAAA,OAAO,EAAE,aADiB;AAE1BH,MAAAA,KAAK,EAALA;AAF0B,KAArB,CAAP;AAID;AACF,CAZD;;eAceb,S","sourcesContent":["/* eslint-disable linebreak-style */\r\n/* eslint-disable consistent-return */\r\nimport jwt from 'jsonwebtoken';\r\n\r\nconst secret = process.env.JWT_KEY;\r\nconst checkAuth = (req, res, next) => {\r\n  try {\r\n    const token = req.headers.authorization.split(' ')[1] || req.body.token;\r\n    const decoded = jwt.verify(token, secret);\r\n    req.userData = decoded;\r\n    next();\r\n  } catch (error) {\r\n    return res.status(401).json({\r\n      message: 'Auth failed',\r\n      error,\r\n    });\r\n  }\r\n};\r\n\r\nexport default checkAuth;\r\n"],"file":"checkAuth.js"}